{% extends "pm/home.html" %}

{% block title %}Submit Payment Request{% endblock %}

{% block content %}
<h2>Submit Payment Request</h2>
<p style="color: var(--muted); margin-bottom: 24px;">Select a lease to submit your payment proof for verification.</p>

{% if leases %}
    <div style="display: grid; gap: 16px;">
        {% for lease in leases %}
            <div class="property-card" style="display: flex; justify-content: space-between; align-items: center; padding: 20px;">
                <div>
                    <h3 style="margin: 0 0 8px 0; color: var(--text);">
                        {% if lease.property %}{{ lease.property.address }}{% else %}{{ lease.unit.nickname }} - {{ lease.unit.complex.address }}{% endif %}
                    </h3>
                    <div style="color: var(--muted); font-size: 14px;">
                        <p style="margin: 4px 0;"><strong>Monthly Payment:</strong> â‚¬{{ lease.monthly_payment_amount }}</p>
                        <p style="margin: 4px 0;"><strong>Lease Period:</strong> {{ lease.start_date }} to {{ lease.end_date }}</p>
                        {% if lease.months_due > 0 %}
                            <p style="margin: 4px 0; color: var(--danger);"><strong>Months Due:</strong> {{ lease.months_due }}</p>
                        {% else %}
                            <p style="margin: 4px 0; color: var(--success);"><strong>Status:</strong> Up to date</p>
                        {% endif %}
                    </div>
                </div>
                <div style="display: flex; gap: 12px; align-items: center;">
                    {% if lease.months_due > 0 %}
                        <span class="status available" style="background: var(--danger); margin-right: 12px;">PAYMENT DUE</span>
                    {% else %}
                        <span class="status rented" style="background: var(--success); margin-right: 12px;">CURRENT</span>
                    {% endif %}
                    <a href="{% url 'submit_payment_request' lease.id %}" class="btn">Submit Payment Proof</a>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="property-card" style="text-align: center; padding: 40px;">
        <h3 style="color: var(--muted);">No Active Leases</h3>
        <p style="color: var(--muted);">You are not currently associated with any lease agreements.</p>
    </div>
{% endif %}
{% endblock %}